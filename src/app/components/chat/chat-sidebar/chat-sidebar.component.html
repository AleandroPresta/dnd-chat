<div class="w-64 bg-slate-800 flex flex-col h-full">
  <!-- App Logo -->
  <div class="px-4 py-5">
    <h1 class="text-xl font-bold text-white">D&D Chat</h1>
  </div>
  <!-- Create Room Button -->
  <div class="px-4 pb-2">
    <button (click)="toggleCreateRoomForm()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg py-2 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
      Create New Room
    </button>
  </div>
  <!-- Create Room Form -->
  <div *ngIf="showCreateRoomForm" class="px-4 pb-4 pt-2">
    <form [formGroup]="roomForm" (ngSubmit)="createRoom()" class="bg-slate-700 rounded-lg p-3">
      <input type="text" formControlName="name" placeholder="Room name" class="w-full bg-slate-600 text-white rounded-lg py-2 px-4 text-sm mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      <input type="text" formControlName="description" placeholder="Description (optional)" class="w-full bg-slate-600 text-white rounded-lg py-2 px-4 text-sm mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
      <div class="flex justify-end space-x-2">
        <button type="button" (click)="toggleCreateRoomForm()" class="bg-gray-500 hover:bg-gray-600 text-white rounded-lg py-1 px-3 text-xs">Cancel</button>
        <button type="submit" [disabled]="roomForm.invalid" class="bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg py-1 px-3 text-xs disabled:bg-indigo-400">Create</button>
      </div>
    </form>
  </div>
  <!-- Search Bar -->
  <div class="px-4 pb-4">
    <div class="relative">
      <input type="text" placeholder="Search rooms..." class="w-full bg-slate-700 text-white rounded-lg py-2 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
    </div>
  </div>
  <!-- Chat Rooms List -->
  <div class="px-4 pb-3 flex justify-between items-center">
    <h3 class="text-xs font-semibold text-slate-400 uppercase tracking-wider">Chat Rooms</h3>
    <div *ngIf="loading.rooms" class="text-xs text-slate-400">Loading...</div>
  </div>
  <!-- Room List with Scrolling -->
  <div class="flex-1 overflow-y-auto px-2 message-container">
    <div *ngFor="let room of rooms" [class.bg-slate-700]="currentRoom?.id === room.id" (click)="joinRoom(room.id)" class="flex flex-col mb-1 p-2 hover:bg-slate-700/70 rounded-lg cursor-pointer transition-colors">
      <div class="text-white font-medium">{{ room.name }}</div>
      <div class="text-xs text-slate-400 truncate">{{ room.description || 'No description' }}</div>
    </div>
    <div *ngIf="rooms.length === 0 && !loading.rooms" class="text-center py-4">
      <p class="text-slate-400 text-sm">No rooms available</p>
      <p class="text-slate-500 text-xs mt-1">Create a new room to get started</p>
    </div>
  </div>
  <!-- User Profile Section -->
  <div class="p-4 border-t border-slate-700">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <div class="w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white">
          {{ authService.currentUser?.username?.charAt(0) || authService.currentUser?.email?.charAt(0) || '?' }}
        </div>
        <span class="ml-2 text-white font-medium truncate">
          {{ authService.currentUser?.username || authService.currentUser?.email || 'Anonymous' }}
        </span>
      </div>
      <button (click)="onLogout()" class="text-slate-400 hover:text-white" title="Logout">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-5-5H3zm7 2a1 1 0 011 1v3.586l3.707-3.707a1 1 0 011.414 1.414l-5.414 5.414a1 1 0 01-1.414 0L5.586 9a1 1 0 011.414-1.414L10 11.586V6a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
  </div>
</div>
